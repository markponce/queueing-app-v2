(this["webpackJsonptest-material"]=this["webpackJsonptest-material"]||[]).push([[0],{105:function(e,t,n){e.exports=n(164)},110:function(e,t,n){},159:function(e,t){},163:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),u=n.n(c),o=n(7),l=n.n(o),i=(n(110),n(25)),s=n(14),d=n(23),m=n.n(d),f=n(39),p=n(18),E=n(16),b=n.n(E),v=Object(p.b)("queues/fetchQueues",Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("queues");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),g=Object(p.c)({name:"queues",initialState:{queues:[],status:"idle",error:null},reducers:{setQueues:function(e,t){}},extraReducers:(a={},Object(s.a)(a,v.pending,(function(e,t){e.status="loading"})),Object(s.a)(a,v.fulfilled,(function(e,t){e.status="success",e.queues=t.payload})),Object(s.a)(a,v.rejected,(function(e,t){e.status="failed",e.error=t.payload})),a)}),j=function(e){return e.queues},h=g.reducer,O=n(50),y=n.n(O),C=n(193),k=n(207),w=n(206),S=n(204),q=Object(p.b)("counters/fetchCounters",Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("counters");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),x=Object(p.b)("counters/postSelectedCounter",function(){var e=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("userSession/selectedCounter",{selectedCounter:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N=Object(p.b)("counters/getSelectedCounter",Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("userSession/selectedCounter");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),A=Object(p.c)({name:"counters",initialState:{counters:[],status:"idle",error:null,selectedCounter:""},reducers:{setSelectedCounter:function(e,t){e.selectedCounter=t.payload}},extraReducers:(r={},Object(s.a)(r,N.pending,(function(e,t){e.status="loading"})),Object(s.a)(r,N.fulfilled,(function(e,t){e.status="success",e.selectedCounter=t.payload.selectedCounter})),Object(s.a)(r,N.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(s.a)(r,x.pending,(function(e,t){e.status="loading"})),Object(s.a)(r,x.fulfilled,(function(e,t){e.status="success",e.selectedCounter=t.payload.selectedCounter})),Object(s.a)(r,x.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(s.a)(r,q.pending,(function(e,t){e.status="loading"})),Object(s.a)(r,q.fulfilled,(function(e,t){e.status="success",e.counters=t.payload})),Object(s.a)(r,q.rejected,(function(e,t){e.status="failed",e.error=t.payload})),r)}),T=(A.actions.setSelectedCounter,function(e){return e.counters}),D=A.reducer,P=Object(C.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));function W(){var e=P(),t=Object(i.c)(T),n=t.counters,a=t.selectedCounter,r=(t.status,Object(i.b)());Object(c.useEffect)((function(){var e=r(q()),t=r(N());return function(){e.abort(),t.abort()}}),[]);return u.a.createElement("div",null,u.a.createElement(w.a,{className:e.formControl},u.a.createElement(k.a,{htmlFor:"counter"},"Counter"),u.a.createElement(S.a,{native:!0,value:a,onChange:function(e){e.preventDefault();var t=e.target.value;r(x(t))},inputProps:{name:"counter",id:"select-ounter"}},u.a.createElement("option",{"aria-label":"None",value:""}),n.map((function(e){return u.a.createElement("option",{key:e._id,value:e._id},e.name)})))))}var B=n(199),I=n(203),Q=n(202),R=n(198),_=n(200),J=n(201),L=n(197),U=n(205);function F(){var e=Object(i.c)(j),t=e.queues,n=(e.status,Object(i.c)(T).selectedCounter),a=Object(i.b)();Object(c.useEffect)((function(){var e;return console.log("useEffect"),e=a(v()),y()().on("message",(function(e){a(v())})),function(){e&&e.abort()}}),[]),Object(c.useEffect)((function(){var e;return console.log("useEffect selectedCounter"),e=a(v()),function(){e&&e.abort()}}),[n]);var r=Object(C.a)({table:{minWidth:650}})();return u.a.createElement("div",{style:{padding:"20px"}},u.a.createElement(W,null),u.a.createElement(R.a,{component:L.a},u.a.createElement(B.a,{className:r.table,"aria-label":"simple table"},u.a.createElement(_.a,null,u.a.createElement(J.a,null,u.a.createElement(Q.a,{align:"center"},"Number"),u.a.createElement(Q.a,{align:"center"},"Type"),u.a.createElement(Q.a,{align:"center"},"Name"),u.a.createElement(Q.a,{align:"center"},"Service"),u.a.createElement(Q.a,{align:"center"},"Status"),u.a.createElement(Q.a,{align:"center"},"Action"))),u.a.createElement(I.a,null,Array.isArray(t)&&t.map((function(e){return u.a.createElement(J.a,{key:e.id},u.a.createElement(Q.a,{align:"center",component:"th",scope:"row"},u.a.createElement("div",null,e.id),e.isPriority&&"P",e.ordinal.toString().padStart(4,"0")),u.a.createElement(Q.a,{align:"center"},function(e){switch(e){case 2:return"SENIOR";case 3:return"PWD";case 4:return"PREGNANT";default:return"-"}}(e.customerType)),u.a.createElement(Q.a,{align:"center"},e.customerName),u.a.createElement(Q.a,{align:"center"},function(e){var t=e.services;if(Array.isArray(t))return u.a.createElement("ul",null,t.map((function(e){return u.a.createElement("li",{key:e._id},e.name)})))}(e)),u.a.createElement(Q.a,{align:"center"},function(e){return 0===e?"QUEUED":1===e?"CALLED":void 0}(e.status)),u.a.createElement(Q.a,{align:"center"},0===e.status&&n&&u.a.createElement(U.a,{variant:"contained",color:"primary",onClick:function(){return t=e.id,void(""!==n?b.a.patch("/queues/call/"+t,{counterId:n}).then((function(e){return e.data})).then((function(e){})).catch((function(e){alert(e)})):alert("Select counter first."));var t}},"Call"),1===e.status&&n&&u.a.createElement(U.a,{variant:"contained",color:"primary",onClick:function(){return t=e.id,void(""!==n?b.a.patch("/queues/done/"+t,{counterId:n}).then((function(e){return e.data})).then((function(e){})).catch((function(e){alert(e)})):alert("Select counter first."));var t}},"Done")))}))))))}var G=n(93),M=n(10),$=n(94);function z(){var e=Object(c.useState)([]),t=Object($.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){var e=b.a.CancelToken.source();b.a.get("counters/queue",{cancelToken:e.token}).then((function(e){return a(e.data)})).catch((function(e){return console.log(e)}));return y()().on("message",(function(t){b.a.get("counters/queue",{cancelToken:e.token}).then((function(e){return a(e.data)})).catch((function(e){return console.log(e)}))})),function(){e.cancel()}}),[]),u.a.createElement(R.a,{component:L.a},u.a.createElement(B.a,{"aria-label":"Counter Queues"},u.a.createElement(_.a,null,u.a.createElement(J.a,null,u.a.createElement(Q.a,null,"Counter"),u.a.createElement(Q.a,{align:"right"},"Number"))),u.a.createElement(I.a,null,n.map((function(e){var t;return u.a.createElement(J.a,{key:e._id},u.a.createElement(Q.a,{component:"th",scope:"row"},e.name),u.a.createElement(Q.a,{align:"right"},null!==(t=e.queues.number)&&void 0!==t?t:"-"))})))))}var H=function(){return u.a.createElement(G.a,null,u.a.createElement("div",{className:"App"},u.a.createElement(M.c,null,u.a.createElement(M.a,{exact:!0,path:"/"},u.a.createElement(F,null)),u.a.createElement(M.a,{path:"/board"},u.a.createElement(z,null)))))},K=Object(p.c)({name:"counter",initialState:{value:0},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}}}),V=K.actions,X=(V.increment,V.decrement,V.incrementByAmount,K.reducer),Y=Object(p.a)({reducer:{counter:X,queues:h,counters:D}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(163);l.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(i.a,{store:Y},u.a.createElement(H,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[105,1,2]]]);
//# sourceMappingURL=main.18d71715.chunk.js.map